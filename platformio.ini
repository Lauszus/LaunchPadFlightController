; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter, extra scripting
;   Upload options: custom port, speed and extra flags
;   Library options: dependencies, extra library storages
;
; Please visit documentation for the other options and examples
; http://docs.platformio.org/page/projectconf.html

; Only run the standard build by default
[platformio]
env_default = lptm4c1230c3pm

; Common settings
[common]
platform = titiva
board = lptm4c1230c3pm
src_filter = +<*> +<../lib/utils/uartstdio.c> -<.git/> -<startup_rvmdk.S>
build_unflags = -std=gnu11
build_flags = -Wl,-T./src/LaunchPadFlightController.ld -Wl,--entry=ResetISR -Wl,--gc-sections -I./lib -L./lib/driverlib/gcc -llibdriver.a -Wdouble-promotion -MD -std=c99 -pedantic -c -Wunsafe-loop-optimizations -Wunused-parameter -Woverflow -mfpu=fpv4-sp-d16 -mfloat-abi=softfp -Dgcc -DPART_TM4C123GH6PM -DTARGET_IS_BLIZZARD_RB1 -DUART_BUFFERED -DUART_BUFFERED1

; Default environment settings for the project
[env:lptm4c1230c3pm]
platform = ${common.platform}
board = ${common.board}
src_filter = ${common.src_filter}
build_unflags = ${common.build_unflags}
build_flags = ${common.build_flags} -DUART_DEBUG=0 -DUSE_MAG=1 -DUSE_BARO=1 -DUSE_SONAR=1 -DUSE_LIDAR_LITE=1 -DUSE_FLOW_SENSOR=0 -DONESHOT125=1

; Environment used by the Travis CI
[env:lptm4c1230c3pm_ci]
platform = ${common.platform}
board = ${common.board}
src_filter = ${common.src_filter}
build_unflags = ${common.build_unflags}
build_flags = ${common.build_flags} -Werror -DUART_DEBUG=${env.UART_DEBUG} -DUSE_MAG=${env.USE_MAG} -DUSE_BARO=${env.USE_BARO} -DUSE_SONAR=${env.USE_SONAR} -DUSE_LIDAR_LITE=${env.USE_LIDAR_LITE} -DUSE_FLOW_SENSOR=${env.USE_FLOW_SENSOR} -DONESHOT125=${env.ONESHOT125} -DDEBUG=${env.DEBUG} -DSTEP_ACRO_SELF_LEVEL=${env.STEP_ACRO_SELF_LEVEL} -DSTEP_ALTITUDE_HOLD=${env.STEP_ALTITUDE_HOLD} -DSTEP_HEADING_HOLD=${env.STEP_HEADING_HOLD}

; Basic commands:
; platformio run
; platformio run -t upload
; platformio run -t clean
